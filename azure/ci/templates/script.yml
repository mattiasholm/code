parameters:
  - name: environment
    type: string

  - name: args
    type: string
    default: ""

steps:
  - task: AzureCLI@2
    displayName: ${{ parameters.environment }}
    inputs:
      azureSubscription: $(azureSubscription-${{ parameters.environment }})
      scriptType: pscore
      scriptPath: iac/deploy.ps1
      arguments: ${{ parameters.environment }} ${{ parameters.args }}
